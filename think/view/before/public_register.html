<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- [[[[[Bootstrap]]]]] -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://prium.github.io/falcon/v3.7.0/assets/css/theme.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <title>注册</title>
    <style>
        html {
            width: 100%;
            height: 100%;
        }

        .login-box {
            width: 500px;
        }

        .h-3r {
            height: 3rem !important;
        }

        canvas {
            position: absolute;
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body class="w-100 h-100">
<canvas id="canvas"></canvas>
<div class="container-fluid d-flex w-100 h-100 align-items-center justify-content-center">
    <div class="login-box px-5 py-4 bg-light">
        <form>
            <div class="form-group mt-3">
                <input type="text" class="form-control username" placeholder="请输入用户名" value="">
            </div>
            <div class="form-group mt-3">
                <input type="password" class="form-control pwd" placeholder="请输入密码">
            </div>
            <div class="form-group d-grid mt-4">
                <button type="submit" class="btn btn-block btn-primary smt">注册</button>
            </div>
            <div class="h-3r d-flex align-items-center justify-content-center">
                <span class="text-danger tips"></span>
            </div>
        </form>
    </div>
</div>

<script type="text/javascript">
    $(() => {
        // CHECK
        $('.smt').click(e => {
            $('.tips').html('')
            let username = $(".username").val()
            let password = $(".pwd").val()
            if (username == "") {
                $('.tips').html("用户名不能为空")
                return false;
            }
            if (password == "") {
                $('.tips').html("密码不能为空")
                return false;
            }

            $(e.currentTarget).attr('disabled', 'disabled').html('注册中...')
            $.ajax({
                url: '/public/register',
                type: "POST",
                data: {
                    username,
                    password
                },
                success: resp => {
                    if (resp.code == 1) {
                        location.href = "/public/login";
                    } else {
                        $('.tips').html(resp.msg)
                    }
                    $(e.currentTarget).attr('disabled', false).html('注册')
                },
            })
            return false;
        })
    })
</script>

<!-- [[[[[Canvas]]]]] -->
<script src="../assets/js/canvas_cirecle.js"></script>
</body>

</html>